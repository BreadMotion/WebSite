<!doctype html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <title>Odin を導入してみた | PanKUN Blog</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="description" content="チームで Odin 導入時にハマったポイントと対処方法" />
    <link rel="canonical" href="https://breadmotion.github.io/WebSite/blog/blog_00002.html" />
    <!-- Google AdSense -->
<script
    async
    src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5284984614496391"
    crossorigin="anonymous"
></script>

    <script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://breadmotion.github.io/WebSite/blog/blog_00002.html"
  },
  "headline": "Odin を導入してみた",
  "description": "チームで Odin 導入時にハマったポイントと対処方法",
  "image": [
    "https://cdn-ak.f.st-hatena.com/images/fotolife/R/Raspberly/20201207/20201207023915.png"
  ],
  "datePublished": "2024-06-02T00:00:00.000Z",
  "dateModified": "2024-06-02T00:00:00.000Z",
  "author": {
    "@type": "Person",
    "name": "PanKUN",
    "url": "https://breadmotion.github.io/WebSite"
  },
  "publisher": {
    "@type": "Organization",
    "name": "PanKUN",
    "logo": {
      "@type": "ImageObject",
      "url": "https://breadmotion.github.io/WebSite/assets/img/favicon-192.png"
    }
  }
}</script>
    <meta property="og:title" content="Odin を導入してみた | PanKUN Blog" />
    <meta property="og:description" content="チームで Odin 導入時にハマったポイントと対処方法" />
    <meta property="og:type" content="article" />
    <meta property="og:url" content="https://breadmotion.github.io/WebSite/blog/blog_00002.html" />
    <meta property="og:image" content="https://cdn-ak.f.st-hatena.com/images/fotolife/R/Raspberly/20201207/20201207023915.png" />
    <meta property="og:site_name" content="PanKUN" />
    <link rel="stylesheet" href="../assets/css/base.css" />
    <link rel="stylesheet" href="../assets/css/layout.css" />
    <link rel="stylesheet" href="../assets/css/blog.css" />
  </head>
  <body data-page="blog">
    <div class="page-shell">
      <main class="main-container">
        <div class="post-layout">
          <div class="post-content">
            <article class="post-detail">
              <nav aria-label="breadcrumb" class="breadcrumb">
                <ol class="breadcrumb__list">
                  <li class="breadcrumb__item"><a href="../index.html">ホーム</a></li>
                  <li class="breadcrumb__item"><a href="../blog.html">ブログ</a></li>
                  <li class="breadcrumb__item" aria-current="page">Odin を導入してみた</li>
                </ol>
              </nav>
              <header class="post-detail__header">
                <p class="post-detail__meta">2024/06/02 / Unity</p>
                <h1 class="post-detail__title">Odin を導入してみた</h1>
                <p class="post-detail__description">チームで Odin 導入時にハマったポイントと対処方法</p>
                <p class="post-detail__tags"><a class="tag" href="../blog.html?tag=unity">unity</a> <a class="tag" href="../blog.html?tag=plugin">plugin</a> <a class="tag" href="../blog.html?tag=tool">tool</a></p>
              </header>
              <section class="post-detail__body markdown-body"><p>こんにちは！パン君です。</p>
<p>今回はインディーズのプロジェクトで <strong>Odin Inspector</strong> を導入した際に起きたトラブルと、そのときに行った対処についてまとめます。</p>
<p>ざっくり言うと、</p>
<ul>
<li><strong>Odin 関連の <code>.meta</code> ファイルに差分が出る</strong></li>
<li>一部環境で Unity が <strong>Safe Mode でしか起動しない</strong></li>
<li>Test Framework 周りのエラーも一緒に出る</li>
</ul>
<p>という状態になりました。</p>
<p>自分の環境では再現せず、「動いている人」と「動かない人」が混ざる状態だったので、原因の切り分けとチーム内での対処ルールを整える必要がありました。</p>
<p>この記事では、実際に行った手順ベースで <strong>「こうやっておけば最初の導入時に事故りにくい」</strong> という視点で書いていきます。</p>
<hr>
<h2 id="エラー内容の整理">エラー内容の整理</h2><p>まず、チーム内で実際に発生していた症状を整理します。</p>
<h3 id="1-meta-ファイルの差分と警告">1. meta ファイルの差分と警告</h3><p>一部メンバーの環境で、Odin 関係の <code>.meta</code> ファイルに差分が発生し、</p>
<blockquote>
<p>無効な meta ファイルが存在します</p>
</blockquote>
<p>という警告や、Odin 関連のアセンブリがうまく認識されないエラーが出ていました。</p>
<h3 id="2-safe-mode-での起動">2. Safe Mode での起動</h3><ul>
<li>自分の環境では普通に起動</li>
<li>別のメンバーでは <strong>UnityがSafe Modeでしか開けない</strong></li>
</ul>
<p>という状態に。</p>
<p>自分側で</p>
<ul>
<li>Odin をインポート</li>
<li>別のローカルプロジェクトで <code>クリーン → チェックアウト</code> して検証</li>
</ul>
<p>まで行ったときは問題なかったのですが、<br>一部メンバーだけ Safe Mode 行きになると報告をもらいました。</p>
<h3 id="3-test-framework-のエラー">3. Test Framework のエラー</h3><p>Safe Mode のログを見てもらったところ、Odin とは別に</p>
<ul>
<li><strong>Test Framework 関連のエラー</strong></li>
</ul>
<p>が出ているパターンがありました。</p>
<p>Unity の Test Framework は、</p>
<ul>
<li>Unity エディタ上部メニュー:<br><code>Window &gt; General &gt; Test Runner（バージョンによって多少名称違い）</code></li>
<li>コード上では <code>[Test]</code> 属性などで単体テストを書くためのパッケージ</li>
</ul>
<p>です。</p>
<p>ログを読む限り、</p>
<ul>
<li>Odin 関連のどこかで <strong>Test Framework に依存している</strong></li>
<li>しかし、あるメンバーの環境では Test Framework が壊れている / 読めていない</li>
</ul>
<p>という状態になっていました。</p>
<p>ただし、</p>
<ul>
<li><code>Packages/manifest.json</code> 上は Test Framework のバージョンは揃っている</li>
<li>自分の別プロジェクトでは同じバージョンで問題なく動作している</li>
</ul>
<p>という状況だったため、 <strong>パッケージそのものが壊れているわけではない</strong> と判断しました。</p>
<hr>
<h2 id="原因の候補">原因の候補</h2><p>実際にログを見ながら、原因としてありそうだったものはこのあたりです。</p>
<ol>
<li><strong>Unity / Odin / Test Framework のバージョン差異</strong><ul>
<li>特定メンバーだけ Unity のマイナーバージョンが違う</li>
<li>Odin をインポートしたときのバージョンが微妙に違う</li>
</ul>
</li>
<li><strong><code>.meta</code> ファイルや <code>Library</code> の状態差</strong><ul>
<li><code>Library</code> フォルダが古いまま</li>
<li>一部 <code>.meta</code> がローカルだけで生成されており、Git に上がっていない</li>
</ul>
</li>
<li><strong>Test Framework のインストール状態の差</strong><ul>
<li>Package Manager 上で一度削除 or Disable されている</li>
<li>キャッシュが壊れていて、再インポートが完了していない</li>
</ul>
</li>
</ol>
<p>実際には「どれか 1 つ」というより、 <strong>複数の条件が重なって Safe Mode 送りになっていた</strong> 感じでした。</p>
<hr>
<h2 id="実際に行った対処手順">実際に行った対処手順</h2><p>ここからは、チームで実際にやってもらった手順を整理して書いておきます。</p>
<h3 id="手順-1-全員の作業手順を統一する">手順 1: 全員の作業手順を統一する</h3><p>まずは、 <strong>「Pull したあとに何をするか」</strong> を固定しました。</p>
<ol>
<li><code>git pull</code> する</li>
<li>Unity を閉じた状態で<ul>
<li><code>Library</code> フォルダを削除</li>
<li>必要なら <code>Temp</code> や <code>obj</code> も削除（任意）</li>
</ul>
</li>
<li>Unity を再起動して、<strong>初回の再インポートを最後まで待つ</strong></li>
</ol>
<p>これをやっていないメンバーが何人かいたため、<br>手順を文章にして Discord / DM で流し、<strong>「まずはここから」</strong>として統一しました。</p>
<blockquote>
<p>これだけで直った人もいるので、<br>できれば Odin 導入時に「手順書セットで配る」のがおすすめです。</p>
</blockquote>
<h3 id="手順-2-odin-および-test-framework-の状態確認">手順 2: Odin および Test Framework の状態確認</h3><p>次に、 <strong>問題が残ったメンバー</strong> に対しては、パッケージの状態を確認してもらいました。</p>
<ul>
<li><code>Window &gt; Package Manager</code> を開く</li>
<li><strong>Odin</strong> のバージョンを確認<ul>
<li>導入したバージョンと一致しているか</li>
</ul>
</li>
<li><code>Unity Registry</code> 側で <strong>Test Framework</strong> を確認<ul>
<li>インストール済みか</li>
<li>バージョンは他メンバーと同じか</li>
<li>状態が <code>Error</code> / <code>Resolve</code> 待ちになっていないか</li>
</ul>
</li>
</ul>
<p>もし Test Framework が壊れていそうな場合は、</p>
<ol>
<li>一旦 Test Framework パッケージを「Remove」する</li>
<li>Unity を再起動</li>
<li>再度 Package Manager から Test Framework をインストール</li>
</ol>
<p>という形で再インポートしてもらいました。</p>
<h3 id="手順-3-meta-差分の整理">手順 3: <code>.meta</code> 差分の整理</h3><p>Odin 関係の <code>.meta</code> ファイルで差分が出ている場合は、</p>
<ul>
<li>まずはリポジトリ側に <strong>正しい状態の Odin + meta をコミット</strong></li>
<li>その後、他メンバーには</li>
</ul>
<pre><code class="language-text">  1. 作業ブランチでローカル変更を避難する（stash or commit）
  2. 最新ブランチに同期
  3. Library を削除
  4. Unity 再起動後、Odin 関係の .meta 差分が出るか確認
</code></pre>
<p>という流れで動いてもらいました。
　
「動いている環境」をいったん正としてリポジトリに固め、それ以外の環境を合わせにいく<br>という考え方です。</p>
<h2 id="チームで-odin-を導入するときの運用ルール">チームで Odin を導入するときの運用ルール</h2><p>今回のトラブルを踏まえて、次のプロジェクト以降で気をつけようと思ったポイントをまとめておきます。  </p>
<h3 id="1-導入前に「担当者」を決める">1. 導入前に「担当者」を決める</h3><ul>
<li>Odin のバージョン選定</li>
<li>プロジェクトへのインポート</li>
<li>初回コミット</li>
</ul>
<p>ここは <strong>1人の担当者がまとめてやる</strong> 方が事故りにくいです。</p>
<p>中途半端な状態で複数人がそれぞれインポートすると、<br>.meta や manifest.json がぐちゃっとなりやすいです。  </p>
<h3 id="2-unity--odin--test-framework-の「想定バージョン」を明文化する">2. Unity / Odin / Test Framework の「想定バージョン」を明文化する</h3><ul>
<li>プロジェクト開始時に<ul>
<li>Unity バージョン</li>
<li>Odin バージョン</li>
<li>Test Framework バージョン
を、どこかドキュメントに書いておく<br>後から参加してくるメンバーにも、「これに合わせてください」と案内するだけで済むようになります。</li>
</ul>
</li>
</ul>
<h3 id="3-初回セットアップ手順を-readme-に書いておく">3. 初回セットアップ手順を README に書いておく</h3><p>今回やったような、</p>
<ul>
<li>git clone / git pull 後にやること<ul>
<li>Library 削除</li>
<li>Unity 再起動</li>
</ul>
</li>
<li>うまく起動しなかったときの確認ポイント<ul>
<li>Odin / Test Framework の状態確認</li>
<li>Safe Mode になったときはログを添付して報告してもらう</li>
</ul>
</li>
</ul>
<p>といった内容を、簡単な手順書にしておくだけでトラブル時のコミュニケーションコストがかなり下がります。</p>
<h2 id="まとめ">まとめ</h2><p>今回の Odin 導入で学んだことをまとめると、こんな感じです。</p>
<ul>
<li>Odin 自体は便利だが、チーム導入時には「Unity / Test Framework / meta ファイル」の差異で事故りやすい</li>
<li>「動いている環境」を 1 つ決めて、そこから<ul>
<li>Odin + Test Framework の状態をコミット</li>
<li>他メンバーの環境をその状態に寄せていくという方針がやりやすい</li>
</ul>
</li>
<li>導入時の手順や想定バージョンを <strong>事前に軽くドキュメント化</strong> しておくだけでも、だいぶ安全になる</li>
</ul>
<p>Odin はカスタムインスペクターやエディタ拡張まわりでかなり強力なツールなので、<br>一度チームで安定して導入できる形が作れると、 <strong>次以降のプロジェクトがかなり楽</strong> になります。</p>
<p>今後は実際にどんな機能を Odin で作っているか（属性ベースの Editor 拡張や、Data 管理の工夫など）も、<br>別の記事で書いていければと思います。</p>
</section>
              <section class="section section--recommend">
                <h2 class="section__title">おすすめ記事</h2>
                <div id="recommendList" class="recommend-grid"></div>
              </section>
              <div class="post-detail__nav post-detail__nav--bottom">
                <a href="../blog.html" class="btn btn--back">← ブログ一覧へ戻る</a>
              </div>
            </article>
          </div>
          <aside class="post-sidebar">
            <div class="toc-sticky-container">
              <nav class="toc">
                <h2 class="toc__title">目次</h2>
                <ul class="toc-list"><li class="toc-item toc-item--level-2"><a href="#エラー内容の整理">エラー内容の整理</a></li><li class="toc-item toc-item--level-3"><a href="#1-meta-ファイルの差分と警告">1. meta ファイルの差分と警告</a></li><li class="toc-item toc-item--level-3"><a href="#2-safe-mode-での起動">2. Safe Mode での起動</a></li><li class="toc-item toc-item--level-3"><a href="#3-test-framework-のエラー">3. Test Framework のエラー</a></li><li class="toc-item toc-item--level-2"><a href="#原因の候補">原因の候補</a></li><li class="toc-item toc-item--level-2"><a href="#実際に行った対処手順">実際に行った対処手順</a></li><li class="toc-item toc-item--level-3"><a href="#手順-1-全員の作業手順を統一する">手順 1: 全員の作業手順を統一する</a></li><li class="toc-item toc-item--level-3"><a href="#手順-2-odin-および-test-framework-の状態確認">手順 2: Odin および Test Framework の状態確認</a></li><li class="toc-item toc-item--level-3"><a href="#手順-3-meta-差分の整理">手順 3: &lt;code&gt;.meta&lt;/code&gt; 差分の整理</a></li><li class="toc-item toc-item--level-2"><a href="#チームで-odin-を導入するときの運用ルール">チームで Odin を導入するときの運用ルール</a></li><li class="toc-item toc-item--level-3"><a href="#1-導入前に「担当者」を決める">1. 導入前に「担当者」を決める</a></li><li class="toc-item toc-item--level-3"><a href="#2-unity--odin--test-framework-の「想定バージョン」を明文化する">2. Unity / Odin / Test Framework の「想定バージョン」を明文化する</a></li><li class="toc-item toc-item--level-3"><a href="#3-初回セットアップ手順を-readme-に書いておく">3. 初回セットアップ手順を README に書いておく</a></li><li class="toc-item toc-item--level-2"><a href="#まとめ">まとめ</a></li></ul>
              </nav>
            </div>
          </aside>
        </div>
      </main>
    </div>
    <script src="../assets/js/layout.js" defer></script>
    <script src="../assets/js/ui.js"></script>
    <canvas id="menuAnimationCanvas"></canvas>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.0/p5.min.js"></script>
    <script src="../assets/js/particles.js"></script>
    <script src="../assets/js/recommend.js" defer></script>
  </body>
</html>